<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Mr Apple Store</title>
<style>

body {
    margin: 0;
    font-family: Arial;
    background: linear-gradient(-45deg, #1a1a1a, #111, #0f0f0f, #1a1a1a);
    background-size: 400% 400%;
    animation: gradientMove 12s ease infinite;
}

@keyframes gradientMove {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* ===== Mini Banners ===== */
.mini-banners {
    display: flex;
    justify-content: space-between;
    gap: 14px;
    margin: 10px 0 25px;
}

.banner-item {
    flex: 1;
    background: #fff;
    border-radius: 14px;
    padding: 14px;
    display: flex;
    align-items: center;
    gap: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.10);
    transition: 0.25s;
    cursor: pointer;
}

.banner-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.15);
}

.banner-item img {
    width: 48px;
    height: 48px;
}

.banner-text {
    font-size: 15px;
    color: #222;
    font-weight: bold;
}

@media (max-width:768px) {
    .mini-banners {
        flex-direction: column;
    }
}

body {
    font-family: Arial;
    background:#f5f5f5;
    margin:0;
}

/* Ù‡ÙŠØ¯Ø± */
header {
    background:#111;
    color:#fff;
    padding:12px 18px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 8px rgba(0,0,0,0.3);
}

header .logo img {
    height:55px;
}

/* Ø¬Ù‡Ø© Ø§Ù„ÙŠÙ…ÙŠÙ†: Ø§Ù„Ø³Ù„Ø© + Ø§Ù„Ø­Ø³Ø§Ø¨ */
.header-right {
    display:flex;
    align-items:center;
    gap:20px;
}

.cart-link {
    color:#fff;
    font-size:16px;
    text-decoration:none;
    position:relative;
}
#cartCount {
    display:none;
    background:#ff4444;
    color:#fff;
    padding:2px 6px;
    border-radius:50%;
    font-size:12px;
    position:absolute;
    top:-6px;
    right:-10px;
}

/* ØµÙ†Ø¯ÙˆÙ‚ Ø£Ø²Ø±Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
.auth-box {
    display:flex;
    align-items:center;
    gap:8px;
}

.btn-auth,
.btn-auth-outline {
    padding:6px 12px;
    border-radius:999px;
    font-size:13px;
    cursor:pointer;
    text-decoration:none;
}

.btn-auth {
    background:#ff7a00;
    color:#fff;
    border:none;
}

.btn-auth-outline {
    background:transparent;
    color:#fff;
    border:1px solid #666;
}

.btn-auth:hover,
.btn-auth-outline:hover {
    opacity:0.9;
}

.user-welcome {
    font-size:13px;
    color:#ddd;
}

/* Ø­Ø§ÙˆÙŠØ© Ø¹Ø§Ù…Ø© Ù„Ù„Ù…Ø­ØªÙˆÙ‰ */
.main-wrap {
    max-width:1200px;
    margin:0 auto;
    padding:0 12px 40px;
}

/* Ø§Ù„Ø£Ù‚Ø³Ø§Ù… (ÙƒÙ„ Ø§Ù„ÙƒØ§ØªÙŠØ¬ÙˆØ±ÙŠØ² Ù…Ù† Ø§Ù„Ø´ÙŠØª) */
.products {
    display:grid;
    grid-template-columns: repeat(auto-fill, minmax(230px,1fr));
    gap:20px;
    padding:20px 0;
}

.card {
    background:#fff;
    border-radius:12px;
    padding:12px;
    box-shadow:0 3px 8px rgba(0,0,0,0.08);
    text-align:center;
}

.card img {
    width:100%;
    border-radius:10px;
}

.card h3 {
    font-size:18px;
    margin:10px 0;
}

.badge-status {
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    font-size:12px;
    margin-top:6px;
}

.badge-available {
    background:#e6ffed;
    color:#137333;
}

.badge-out {
    background:#ffe6e6;
    color:#b00020;
}

.detail-btn {
    display:block;
    margin-top:10px;
    padding:10px;
    background:#ff7a00;
    color:white;
    border-radius:8px;
    font-size:15px;
    text-decoration:none;
}

/* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø£Ù‚Ø³Ø§Ù… */
.section-buttons {
    text-align:center;
    margin:25px 0 10px;
}

.section-buttons button {
    padding:12px 18px;
    margin:4px;
    border:none;
    border-radius:18px;
    cursor:pointer;
    background:#333;
    color:#fff;
    font-size:14px;
}
.section-buttons button.active {
    background:#ff7a00;
}

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… */
.category-title {
    text-align:center;
    margin:10px 0 15px;
    font-size:20px;
    color:#222;
}

/* Ø§Ù„ÙÙ„Ø§ØªØ± */
.filters-bar {
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    padding:0 0 10px;
    justify-content:center;
}

.filters-bar input,
.filters-bar select {
    padding:10px;
    font-size:14px;
    border-radius:8px;
    border:1px solid #ccc;
    background:#fff;
}

/* ===== Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± ===== */
</style>
</head>
<body>

<header>
    <div class="logo">
        <img src="images/logo.png">
    </div>

    <div class="header-right">

        <a href="cart.html" class="cart-link">
            ğŸ›’ Ø§Ù„Ø³Ù„Ø©
            <span id="cartCount">0</span>
        </a>

        <div class="auth-box">
            <!-- Ù‚Ø¨Ù„ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <a href="login.html" id="loginLink" class="btn-auth">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</a>
            <a href="register.html" id="registerLink" class="btn-auth-outline">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>

            <!-- Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <span id="userWelcome" class="user-welcome" style="display:none;"></span>
            <button id="logoutBtn" class="btn-auth-outline" style="display:none;">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
        </div>
    </div>
</header>

<div class="main-wrap">

    <!-- ğŸ”¥ Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± -->
    <div class="slider-container">
        <button class="slide-btn prev" onclick="changeSlide(-1)">â®</button>

        <img class="slide active" src="images/slider1.png">
        <img class="slide" src="images/slider2.png">
        <img class="slide" src="images/slider3.png">
        <img class="slide" src="images/slider4.png">
        <img class="slide" src="images/slider5.png">

        <button class="slide-btn next" onclick="changeSlide(1)">â¯</button>
    </div>

<!-- ğŸ”¥ Mini Banners -->
<div class="mini-banners">

    <div class="banner-item">
        <img src="images/m1b.png" alt="Delivery">
        <div class="banner-text">  Ø§Ù‚ÙˆÙ‰ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…ØªÙˆÙØ±Ø© Ø§Ù„Ø§Ù†  </div>
    </div>

    <div class="banner-item">
        <img src="images/m2b.png" alt="Original">
        <div class="banner-text">Ø§Ù‚ÙˆÙ‰ Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø§Ø³ØªØ¨Ø¯Ø§Ù„</div>
    </div>

    <div class="banner-item">
        <img src="images/m3b.png" alt="Sale">
        <div class="banner-text">  Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ø³Ø±ÙŠØ¹ ğŸ”¥</div>
    </div>

</div>

    <style>
    .slider-container {
        width:100%;
        height:480px;
        overflow:hidden;
        position:relative;
        border-radius:18px;
        margin:18px 0 28px;
        box-shadow:0 6px 18px rgba(0,0,0,0.25);
    }

    .slide {
        width:100%;
        height:100%;
        object-fit:cover;
        position:absolute;
        opacity:0;
        transition:opacity .8s ease;
    }

    .slide.active {
        opacity:1;
    }

    .slide-btn {
        position:absolute;
        top:50%;
        transform:translateY(-50%);
        background:rgba(0,0,0,0.4);
        border:none;
        color:#fff;
        padding:8px 14px;
        font-size:22px;
        cursor:pointer;
        border-radius:8px;
        z-index:10;
    }

    .prev { left:14px; }
    .next { right:14px; }

    .slide-btn:hover {
        background:rgba(0,0,0,0.7);
    }

    @media (max-width:768px) {
        .slider-container {
            height:260px;
            margin:12px 0 18px;
            border-radius:14px;
        }
        .section-buttons {
            margin:15px 0 8px;
        }
        .products {
            padding:10px 0 25px;
            gap:14px;
        }
    }
    </style>

    <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll(".slide");

    function showSlide(index) {
        slides.forEach(s => s.classList.remove('active'));
        slides[index].classList.add('active');
    }

    function changeSlide(step) {
        currentSlide = (currentSlide + step + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    setInterval(() => { changeSlide(1); }, 5000);
    </script>
    <!-- ğŸ”¥ Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ø³Ù„Ø§ÙŠØ¯Ø± -->

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… -->
    <div class="section-buttons">
        <button id="btnApple" onclick="switchCategory('apple')" class="active">Ù…Ù†ØªØ¬Ø§Øª Apple</button>
        <button id="btnSamsung" onclick="switchCategory('samsung')">Ù…Ù†ØªØ¬Ø§Øª Samsung</button>
        <button id="btnRealme" onclick="switchCategory('realme')">Ù…Ù†ØªØ¬Ø§Øª Realme</button>
        <button id="btnXiaomi" onclick="switchCategory('xiaomi')">Ù…Ù†ØªØ¬Ø§Øª Xiaomi & POCO</button>
        <button id="btnHonor" onclick="switchCategory('honor')">Ù…Ù†ØªØ¬Ø§Øª Honor</button>
        <button id="btnHuawei" onclick="switchCategory('huawei')">Ø³Ø§Ø¹Ø§Øª Huawei</button>
        <button id="btnAccessories" onclick="switchCategory('accessories')">Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª</button>
    </div>

    <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ -->
    <h2 id="categoryTitle" class="category-title">Ù…Ù†ØªØ¬Ø§Øª Apple</h2>

    <!-- Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ù…ÙˆØ­Ø¯Ø© -->
    <div class="filters-bar">

        <input id="searchInput" type="text" placeholder="Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬..." oninput="applyUnifiedFilter()">

        <select id="typeFilter" onchange="applyUnifiedFilter()">
            <option value="">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
        </select>

        <select id="statusFilter" onchange="applyUnifiedFilter()">
            <option value="">Ø§Ù„Ø­Ø§Ù„Ø©: Ø§Ù„ÙƒÙ„</option>
            <option value="available">Ù…ØªÙˆÙØ± ÙÙ‚Ø·</option>
            <option value="out">ØºÙŠØ± Ù…ØªÙˆÙØ± ÙÙ‚Ø·</option>
        </select>

    </div>

    <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ù…Ù† Ø§Ù„Ø´ÙŠØª -->
    <section id="apple" class="products"></section>
    <section id="samsung" class="products" style="display:none;"></section>
    <section id="realme" class="products" style="display:none;"></section>
    <section id="xiaomi" class="products" style="display:none;"></section>
    <section id="honor" class="products" style="display:none;"></section>
    <section id="huawei" class="products" style="display:none;"></section>
    <section id="accessories" class="products" style="display:none;"></section>

</div> <!-- end .main-wrap -->

<script src="cart.js"></script>

<script>
// Ø±Ø§Ø¨Ø· Google Sheet
const SHEET_URL =
"https://docs.google.com/spreadsheets/d/e/2PACX-1vQy4WWb2dGNoPn7G0mirIaYLF0p80wjsO7X7uEKMiFgubBXvN_QxiPBwl4HrAcotkjBkZ98UDf_GoST/pub?output=csv";

let allProducts = [];
let currentCategory = "apple";

const categoryTitleEl = document.getElementById('categoryTitle');
const categoryTitles = {
    apple: "Ù…Ù†ØªØ¬Ø§Øª Apple",
    samsung: "Ù…Ù†ØªØ¬Ø§Øª Samsung",
    realme: "Ù…Ù†ØªØ¬Ø§Øª Realme",
    xiaomi: "Ù…Ù†ØªØ¬Ø§Øª Xiaomi & POCO",
    honor: "Ù…Ù†ØªØ¬Ø§Øª Honor",
    huawei: "Ø³Ø§Ø¹Ø§Øª Huawei",
    accessories: "Ø§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª"
};

// ØªØ­Ù…ÙŠÙ„ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
async function loadAllProducts() {
    const res = await fetch(SHEET_URL);
    const text = await res.text();
    const lines = text.trim().split("\n");
    lines.shift(); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†

    allProducts = [];

    lines.forEach(line => {
        const cols = line.split(",");

        const category = (cols[1] || "").trim().toLowerCase();
        const name     = (cols[2] || "").trim();
        const html     = (cols[3] || "").trim();
        const image    = (cols[4] || "").trim();
        const status   = (cols[7] || "").trim();
        const type     = (cols[8] || "").trim();

        if (!name) return;

        allProducts.push({
            category,
            name,
            html,
            image,
            type,
            statusKey: status === "Ù…ØªÙˆÙØ±" ? "available" : "out",
            statusRaw: status
        });
    });

    // âœ… Ù‡Ù†Ø§ Ù†ØµØ­Ø­ Ø§Ø³Ù… iPhone 17 Pro Ù„Ùˆ Ø·Ø§Ù„Ø¹ ØºÙ„Ø· Ù…Ù† Ø§Ù„Ø´ÙŠØª
    allProducts.forEach(p => {
        // ØºÙŠÙ‘Ø± "iphone17pro.html" Ø¥Ø°Ø§ Ø§Ø³Ù… ØµÙØ­Ø© 17 Ø¨Ø±Ùˆ Ù…Ø®ØªÙ„Ù
        if (p.html.toLowerCase() === "iphone17pro.html") {
            p.name = "iPhone 17 Pro";
        }
    });

    buildTypeList();
    applyUnifiedFilter();
}

// ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ù„Ù„ÙÙ„Ø§ØªØ±
function buildTypeList() {
    const used = new Set();
    allProducts.forEach(p => { if (p.type) used.add(p.type); });

    const sel = document.getElementById("typeFilter");
    sel.innerHTML = `<option value="">ÙƒÙ„ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>`;

    used.forEach(t => {
        sel.innerHTML += `<option value="${t}">${t}</option>`;
    });
}

// ØªØºÙŠÙŠØ± Ø§Ù„Ù‚Ø³Ù…
function switchCategory(cat) {
    currentCategory = cat;

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ù†ÙˆØ§Ù†
    categoryTitleEl.textContent = categoryTitles[cat] || "Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª";

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    document.querySelectorAll(".section-buttons button").forEach(b => b.classList.remove("active"));

    if (cat === "apple")      document.getElementById("btnApple").classList.add("active");
    if (cat === "samsung")    document.getElementById("btnSamsung").classList.add("active");
    if (cat === "realme")     document.getElementById("btnRealme").classList.add("active");
    if (cat === "xiaomi")     document.getElementById("btnXiaomi").classList.add("active");
    if (cat === "honor")      document.getElementById("btnHonor").classList.add("active");
    if (cat === "huawei")     document.getElementById("btnHuawei").classList.add("active");
    if (cat === "accessories")document.getElementById("btnAccessories").classList.add("active");

    // Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
    document.getElementById("apple").style.display = "none";
    document.getElementById("samsung").style.display = "none";
    document.getElementById("realme").style.display = "none";
    document.getElementById("xiaomi").style.display = "none";
    document.getElementById("honor").style.display = "none";
    document.getElementById("huawei").style.display = "none";
    document.getElementById("accessories").style.display = "none";

    // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ù…Ø®ØªØ§Ø±
    document.getElementById(cat).style.display = "grid";

    applyUnifiedFilter();
}

// ÙÙ„ØªØ± Ù…ÙˆØ­Ø¯ Ù„ÙƒÙ„ Ø§Ù„Ø£Ù‚Ø³Ø§Ù…
function applyUnifiedFilter() {
    const search = document.getElementById("searchInput").value.toLowerCase();
    const type   = document.getElementById("typeFilter").value;
    const status = document.getElementById("statusFilter").value;

    const target = document.getElementById(currentCategory);
    target.innerHTML = "";

    const filtered = allProducts.filter(p => {
        if (p.category !== currentCategory) return false;
        if (search && !p.name.toLowerCase().includes(search)) return false;
        if (type && p.type !== type) return false;
        if (status && p.statusKey !== status) return false;
        return true;
    });

    if (!filtered.length) {
        target.innerHTML = `<p style="grid-column:1/-1; text-align:center; color:#555;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬.</p>`;
        return;
    }

    renderProducts(filtered, target);
}

// Ø±Ø³Ù… Ø§Ù„ÙƒØ±ÙˆØª
function renderProducts(list, container) {
    container.innerHTML = "";

    list.forEach(p => {
        let badge = `<span class="badge-status ${p.statusKey === 'available' ? 'badge-available' : 'badge-out'}">${p.statusRaw}</span>`;

        container.innerHTML += `
        <div class="card">
            <img src="${p.image}">
            <h3>${p.name}</h3>
            ${badge}
            <a class="detail-btn" href="${p.html}">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</a>
        </div>
        `;
    });
}

loadAllProducts();
</script>


<!-- âœ… Firebase + Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-auth-compat.js"></script>
<script src="firebase-init.js"></script>

<script>
auth.onAuthStateChanged(function(user) {

    const loginLink    = document.getElementById('loginLink');
    const registerLink = document.getElementById('registerLink');
    const userWelcome  = document.getElementById('userWelcome');
    const logoutBtn    = document.getElementById('logoutBtn');

    if (user) {
        const name = user.displayName || user.email;

        if (loginLink)    loginLink.style.display = "none";
        if (registerLink) registerLink.style.display = "none";

        if (userWelcome) {
            userWelcome.textContent = "Ù…Ø±Ø­Ø¨Ø§ØŒ " + name;
            userWelcome.style.display = "inline-block";
        }

        if (logoutBtn) {
            logoutBtn.style.display = "inline-block";
            logoutBtn.onclick = function () {
                auth.signOut().then(() => {
                    window.location.reload();
                });
            };
        }
    } else {
        if (loginLink)    loginLink.style.display = "inline-block";
        if (registerLink) registerLink.style.display = "inline-block";
        if (userWelcome)  userWelcome.style.display = "none";
        if (logoutBtn)    logoutBtn.style.display = "none";
    }
});
</script>

</body>
</html>
